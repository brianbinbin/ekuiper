# eKuiper
A lightweight IoT edge analytic software

![Version: 1.3.7](https://img.shields.io/badge/Version-1.3.7-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.7.1](https://img.shields.io/badge/AppVersion-1.7.1-informational?style=flat-square)

## Install the Chart

- From Github
```
git clone https://github.com/lf-edge/ekuiper.git
cd deploy/chart/ekuiper
helm install my-ekuiper .
```

- From Helm repo
```
helm repo add emqx https://repos.emqx.io/charts
helm install my-ekuiper emqx/ekuiper
```


## Uninstall Chart
```
helm uninstall my-ekuiper
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` |  |
| clusterDomain | string | `"cluster.local"` | clusterDomain Kubernetes Cluster Domain |
| ekuiperEnv | object | `{"enabled":true,"keys":{"fileLog":"KUIPER__BASIC__FILELOG","mqttDefaultServer":"MQTT_SOURCE__DEFAULT__SERVER","premetheusPort":"KUIPER__BASIC__PROMETHEUSPORT","prometheusEnabled":"KUIPER__BASIC__PROMETHEU"},"values":{"fileLog":false,"mqttDefaultServer":"tcp://broker.emqx.io:1883","premetheusPort":9081,"prometheusEnabled":true}}` | remove this when the mqtt_source configmap is available |
| ekuiperMounts[0].capacity | string | `"100Mi"` |  |
| ekuiperMounts[0].mountPath | string | `"/kuiper/data"` |  |
| ekuiperMounts[0].name | string | `"pvc-ekuiper-data"` |  |
| ekuiperMounts[1].capacity | string | `"100Mi"` |  |
| ekuiperMounts[1].mountPath | string | `"/kuiper/plugins/portable"` |  |
| ekuiperMounts[1].name | string | `"pvc-ekuiper-plugins-portable"` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"lfedge/ekuiper"` |  |
| nodeSelector | object | `{}` |  |
| persistence.accessMode | string | `"ReadWriteOnce"` |  |
| persistence.enabled | bool | `false` |  |
| persistence.storageClass | string | `"standard"` |  |
| replicaCount | int | `1` |  |
| resources | object | `{}` |  |
| service.annotations | object | `{"eip.openelb.kubesphere.io/v1alpha2":"eip-pool","lb.kubesphere.io/v1alpha1":"openelb","protocol.openelb.kubesphere.io/v1alpha1":"layer2"}` | Provide any additional annotations which may be required. Evaluated as a template |
| service.nodePorts | object | `{"pushapi":null,"restapi":null}` | Specify the nodePort(s) value for the LoadBalancer and NodePort service types. ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport |
| service.ports | object | `{"pushapi":{"name":"pushapi","port":10081},"restapi":{"name":"restapi","port":9081}}` | Service ports |
| service.ports.pushapi.name | string | `"pushapi"` | eKuiper pushapi port name |
| service.ports.pushapi.port | int | `10081` | eKuiper pushapi port |
| service.ports.restapi.name | string | `"restapi"` | eKuiper restapi port name |
| service.ports.restapi.port | int | `9081` | eKuiper restapi port |
| service.type | string | `"ClusterIP"` | service type |
| tls | object | `{"autoGenerated":false,"caCertificate":"","enabled":false,"existingSecret":"","existingSecretFullChain":false,"serverCertificate":"","serverKey":""}` | Enable encryption to eKuiper |
| tls.autoGenerated | bool | `false` | tls.autoGenerated Generate automatically self-signed TLS certificates |
| tls.caCertificate | string | `""` | tls.caCertificate Certificate Authority (CA) bundle content |
| tls.enabled | bool | `false` | tls.enabled Enable TLS support on eKuiper |
| tolerations[0].effect | string | `"NoExecute"` |  |
| tolerations[0].key | string | `"node.kubernetes.io/not-ready"` |  |
| tolerations[0].operator | string | `"Exists"` |  |
| tolerations[0].tolerationSeconds | int | `30` |  |
| tolerations[1].effect | string | `"NoExecute"` |  |
| tolerations[1].key | string | `"node.kubernetes.io/unreachable"` |  |
| tolerations[1].operator | string | `"Exists"` |  |
| tolerations[1].tolerationSeconds | int | `30` |  |